(()=>{"use strict";var t={};function e(t){return typeof t}function n(t){return null!==t&&"object"===e(t)}function r(t){return"string"===e(t)}function s(t){return"undefined"===e(t)}function o(t){return Array.isArray(t)}function i(t){return"function"===e(t)}function a(t,e){const n=t.indexOf(e);return!(n<0||(t.splice(n,1),0))}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);let l=!0;function c(...t){l&&console.warn(...t)}let _,h,u=0,d=1,f=!1;function p(t){_.delete(t)}function g(t){if(f)return void setTimeout(g,0,t);const e=_.get(t);if(e){f=!0;try{e()}finally{p(t),f=!1}}}const y="undefined"==typeof window?globalThis:window;if(s(y.setImmediate)){_=new Map;const t="setImmediate$"+(u++).toString(32)+"$";y.addEventListener("message",(e=>{e.source===window&&r(e.data)&&e.data.startsWith(t)&&g(Number(e.data.slice(t.length)))}),!1),h=function(e){y.postMessage(t+e,"*")}}const w=y.setImmediate||function(t){if(!i(t)||arguments.length>1)throw new Error("setImmediate require callback function.");return _.set(d,t),h(d),d++},m=y.clearImmediate||p;function b(t){const e=document.createDocumentFragment();return t?.forEach((t=>{e.appendChild(r(t)?document.createTextNode(t):t)})),e}function x(t,e){t.appendChild(e.length>1?b(e):r(e[0])?function(t=""){return document.createTextNode(n(t)?JSON.stringify(t):t)}(e[0]):e[0])}function E(t,e){if(e){if(!n(e))return t.removeAttribute(e);for(const n in e)E(t,n)}}function R(t,e,r){if(e)if(n(e))for(const n in e)R(t,n,e[n]);else s(r)||null===r?E(t,e):t.setAttribute(e,r)}function O(t,e,...n){return function(t,e,n){if(e)for(const n in e)n&&!s(e[n])&&R(t,n,e[n]);return n.length>0&&x(t,n),t}(document.createElement(t),e,n)}function v(t,...e){return O(t,null,...e)}function M(t,e,n,r){return function(t,e,n,r){s(r)&&(r=!!e.startsWith("touch")&&{capture:!1,passive:!0}),t.addEventListener(e,n,r)}(t,e,n,r),function(){!function(t,e,n){t.removeEventListener(e,n)}(t,e,n)}}const N=Symbol("$$");function D(t){return r(t)?t:null===t?"null":s(t)?"undefined":t.toString()}function C(t){return r(t)?t.indexOf(".")>0?t.split("."):[t]:o(t)?t:[t]}function S(t,e,n){if(!t.__parents)return;const r=t.__parents.findIndex((t=>t.core===e&&t.prop===n));r>=0&&t.__parents.splice(r,1)}const A=new Map;function j(t){const e=A.get(t);e&&(m(e.immediate),A.delete(t))}function P(t,e,n){const r=e.__handlers;r?.forEach((e=>{n?e(t):function(t,e){if(A.has(t))return;const n=w((()=>{const e=A.get(t);try{t(e.propertyPath)}finally{A.delete(t)}}));A.set(t,{immediate:n,propertyPath:e})}(e,t)}));const s=e.__listeners;s?.forEach((e=>{P(t,e,n)}))}function F(t,e,n,r=0){const s=t.__listeners;if(!s)return;const o=D(e[r]);if(!o)return;let i=s.get(o);i&&(e.length-1===r?P(e,i,n):F(i,e,n,r+1)),i=s.get("*"),i&&(e.length-1===r?P(e,i,!0):F(i,e,n,r+1)),i=s.get("**"),i&&P(e,i,!0)}function T(t,e,n=0){const r=D(e[n]);t.__listeners||(t.__listeners=new Map);let s=t.__listeners.get(r);return s||(s={__parent:t,__property:r,__handlers:null,__listeners:null},t.__listeners.set(r,s)),e.length-1===n?s:T(s,e,n+1)}function I(t,e,n=0){const r=D(e[n]);if(!r)return null;const s=t.__listeners?.get(r);return s?e.length-1===n?s:I(s,e,n+1):null}function k(t){const e=t.__listeners;e&&(e.forEach((t=>k(t))),t.__listeners=null);const n=t.__handlers;n&&(n.forEach(j),t.__handlers=null),t.__parent=null}class ${constructor(t){this.__notifiable=!0,this.__parents=null,this.__listeners=null,this.__related=null,this.__setters=null,this.target=t,this.proxy=null,Object.defineProperty(t,N,{value:this,writable:!1,configurable:!0,enumerable:!1})}__watch(t,e,n){const r=(t=C(t)).indexOf("**");if(r>=0&&r!==t.length-1)throw new Error('wizard "**" must be last element in path.');const s=T(this,t);s.__handlers||(s.__handlers=[]),s.__handlers.indexOf(e)<0&&s.__handlers.push(e),n&&n!==this&&n.__addRelated(this,t,e)}__unwatch(t,e,n){if(!t)return void k(this);const r=I(this,C(t));if(!r)return;const s=r.__handlers;s&&(e?(j(e),a(s,e)):(s.forEach(j),s.length=0),function(t){if(t?.__handlers&&t.__handlers.length>0||t.__listeners&&t.__listeners.size>0)return null;const e=t.__parent,n=t.__property;t.__parent=null,e.__listeners.delete(n)}(r),n&&n!==this&&n.__rmRelated(this,t,e))}__notify(t,e=!1){if(!this.__notifiable)return;t=C(t),this.__listeners&&F(this,t,e);const n=this.__parents;n?.forEach((n=>{const r=n.core;r?r.__notify([n.prop].concat(t),e):console.error("dev-warn-unexpected: parent of ViewModelCore has been destroied but not unlink.")}))}__destroy(){this.__notifiable=!1,this.__parents=null,k(this),this.proxy=null,this.__related&&(this.__related.forEach(((t,e)=>{t.forEach((t=>{e.__unwatch(t.prop,t.handler)}))})),this.__related=null);const t=this.target,e=this.__setters;e&&(e.forEach(((e,r)=>{if(null===e)return;const s=t[r];n(s)&&N in s&&S(s[N],this,r)})),this.__setters=null),Object.getOwnPropertyNames(t).forEach((e=>{const r=t[e];n(r)&&N in r&&S(r[N],this,e)})),delete t[N],this.target=null}__addRelated(t,e,n){this.__related||(this.__related=new Map);let r=this.__related.get(t);r||this.__related.set(t,r=[]),r.push({prop:e,handler:n})}__rmRelated(t,e,n){if(!this.__related)return;const r=this.__related.get(t);if(!r)return;const s=o(e),i=r.findIndex((t=>n===t.handler&&(s?function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,t.prop):e===t.prop)));i>=0&&r.splice(i,1)}}function L(t,e,o,i,a=!0){if(!r(l=e)||95===l.charCodeAt(0))return t[e]=o,!0;var l;const c=t[e];if(c===o&&!s(o))return!0;let _=n(o)&&!function(t){const e=t.constructor;return e===RegExp||e===Date||e===Boolean}(o);if(_&&(_=N in o,a&&!_))throw new Error(`public property "${e.toString()}" of ViewModel must also be ViewModel`);return n(c)&&N in c&&S(c[N],t[N],e),i(t,e,o),_&&(h=o[N],u=t[N],d=e,h.__parents||(h.__parents=[]),h.__parents.push({core:u,prop:d})),function(t,e){t[N].__notify(e)}(t,e),!0;var h,u,d}function B(t,e,n){t[e]=n}function V(t,e,n){const r=function(t,e){let n=t[N].__setters;if(n||(t[N].__setters=n=new Map),n.has(e))return n.get(e);{let r,s=t.constructor,o=Object.getOwnPropertyDescriptor(s.prototype,e);if(o)return r=i(o.set)?o.set:null,n.set(e,r),r;for(s=Object.getPrototypeOf(s);s?.prototype;){if(o=Object.getOwnPropertyDescriptor(s.prototype,e),o)return r=i(o.set)?o.set:null,n.set(e,r),r;s=Object.getPrototypeOf(s)}return n.set(e,null),null}}(t,e);r?r.call(t[N].proxy,n):t[e]=n}function z(t,e,n){return!(N in t)||L(t,e,n,B,!1)}function H(t,e,n){return N in t?L(t,e,n,V):(c(`call setter "${e.toString()}" after destroied, resources such as setInterval maybe not released before destroy. component:`,t),!0)}const W=Symbol("listeners");class Q{constructor(t){if(this[W]=null,t)for(const e in t){const n=t[e];this.__on(e,n.fn,n.opts)}}async __notify(t,...e){if(!this[W])return;const n=this[W].get(t);if(n)for await(const[r,s]of n){try{await r(...e)}catch(e){console.error("failed __notify",t,"due to:",e)}s?.once&&n.delete(r)}}__on(t,e,n){this[W]||(this[W]=new Map);let r=this[W].get(t);return r||this[W].set(t,r=new Map),r.set(e,n),()=>{this.__off(t,e)}}__off(t,e){const n=this[W];if(!n)return;if(!t)return n.forEach((t=>t.clear())),void n.clear();const r=n.get(t);r&&(e?r.delete(e):r.clear())}}const q=".jg-hide{display:none!important}.jg-hide.jg-hide-enter,.jg-hide.jg-hide-leave{display:block!important}";let J=!1;!function(){if(J)return;J=!0;const t=O("style",{type:"text/css"});t.styleSheet?t.styleSheet.cssText=q:t.textContent=q,document.head.appendChild(t)}();const G=Symbol("__");function K(t){return G in t}function U(t){if(!o(t)||0===t.length)throw new Error("Render results of component is empty");return t}class X extends Q{constructor(t){if(!n(t)||!(N in t))throw new Error("Attributes passed to Component constructor must be ViewModel. See https://[todo]");const e=t[G]||{};super(e.listeners),function(t){if(N in t)throw new Error("component has alreay been wrapped.");const e=new $(t);e.__notifiable=!1,e.proxy=new Proxy(t,{set:H})}(this),this[G]={passedAttrs:t,context:e.context||null,contextState:0,slots:e.slots,state:0,rootNodes:[],nonRootCompNodes:[],refs:null,relatedRefs:null,upNextMap:null,deregFns:null};const r=this[N].proxy;["class","style"].forEach((e=>{if(!(e in t))return;const n=()=>r[e]=t[e];n(),t[N].__watch(e,n)}))}static create(t){const e=n(t);return new this(e&&N in t?t:function(t){if(!n(t)||o(t))throw new Error("attrs() traget must be plain object.");return function(t){const e=new $(t);return e.__notifiable=!1,e.proxy=new Proxy(t,{set:z})}(t)}(e?t:{}))[N].proxy}__addDeregisterFn(t){let e=this[G].deregFns;e||(this[G].deregFns=e=new Set),e.add(t)}__domAddListener(t,e,n,r){const s=M(t,e,(t=>{n.call(this,t)}),r);return this.__addDeregisterFn(s),()=>{s(),this[G].deregFns.delete(s)}}__domPassListeners(t,e){if(1!==this[G].state)throw new Error("domPassListeners must be applied to component which is rendered.");const n=this[W];n&&0!==n.size&&(t&&!o(t)?(e=t,t=null):e||(e=this.__firstDOM),e.nodeType===Node.ELEMENT_NODE&&n.forEach(((n,r)=>{t&&t.indexOf(r)>=0||n.forEach(((t,n)=>{const s=M(e,r,t&&(t.stop||t.prevent)?e=>{t.stop&&e.stopPropagation(),t.prevent&&e.preventDefault(),n.call(this,e)}:t=>{n.call(this,t)},t);this.__addDeregisterFn(s)}))})))}get __transitionDOM(){const t=this[G].rootNodes[0];return K(t)?t.__transitionDOM:t}get __firstDOM(){const t=this[G].rootNodes[0];return K(t)?t.__firstDOM:t}get __lastDOM(){const t=this[G].rootNodes,e=t[t.length-1];return K(e)?e.__lastDOM:e}__doRender(){const t=this.constructor;let e=t.template;if(!e&&this[G].slots&&(e=this[G].slots.default),!i(e))throw new Error(`Template of ${t.name} not found. Forget static getter "template"?`);return e(this)}async __render(){return await this.__beforeRender(),await this.__notify("before-render"),U(await this.__doRender())}async __renderToDOM(t,e=!0){if(0!==this[G].state)throw new Error("component has already been rendered.");const n=U(await this.__render());var r,s;e?(r=n,s=t,t.parentNode.replaceChild(b(r),s)):x(t,n),await this.__handleAfterRender()}async __destroy(t=!0){const e=this[G];if(!(e.state>2)){if(e.state=2,this[N].__notifiable=!1,e.passedAttrs[N].__notifiable=!1,await this.__notify("before-destroy"),await this.__beforeDestroy(),await this.__handleBeforeDestroy(t),super.__off(),e.passedAttrs[N].__destroy(),e.passedAttrs=null,this[N].__destroy(),e.upNextMap&&(e.upNextMap.forEach((t=>{m(t)})),e.upNextMap=null),e.relatedRefs&&(e.relatedRefs.forEach((t=>{const e=t.origin[G].refs;if(!e)return;const n=e.get(t.ref);o(n)?a(n,t.node||this):e.delete(t.ref)})),e.relatedRefs=null),e.deregFns){for await(const t of Array.from(e.deregFns))await t();e.deregFns.clear(),e.deregFns=null}e.state=3,e.rootNodes=e.nonRootCompNodes=e.refs=e.slots=e.context=null}}async __handleBeforeDestroy(t=!1){for await(const t of this[G].nonRootCompNodes)await t.__destroy(!1);let e;for await(const n of this[G].rootNodes)K(n)?await n.__destroy(t):t&&(e||(e=n.parentNode),e.removeChild(n))}async __handleAfterRender(){this[G].passedAttrs[N].__notifiable=!0,this[N].__notifiable=!0;for await(const t of this[G].rootNodes)K(t)&&await t.__handleAfterRender();for await(const t of this[G].nonRootCompNodes)await t.__handleAfterRender();this[G].state=1,this[G].contextState=1===this[G].contextState?3:2,await this.__afterRender(),await this.__notify("after-render")}__updateIfNeed(t,e=!0){if(1!==this[G].state)return;if(!1===t)return void this.__update();if(i(t)){if(!e)return void t.call(this)}else{if(!e)return void this.__update();t=this.__update}let n=this[G].upNextMap;n||(n=this[G].upNextMap=new Map),n.has(t)||n.set(t,w((()=>{n.delete(t),t.call(this)})))}__update(t){}__setContext(t,e,n=!1){if(2===this[G].contextState||3===this[G].contextState)throw new Error("Can't setContext after component has been rendered. Try put setContext code into constructor.");if(0===this[G].contextState&&(this[G].context=Object.assign({},this[G].context),this[G].contextState=1),t in this[G].context&&!n)throw new Error(`Contenxt with key: ${t.toString()} is exist. Pass third argument forceOverride=true to override it.`);this[G].context[t]=e}__getContext(t){return this[G].context?.[t]}__setRef(t,e,n){let r=this[G].refs;r||(this[G].refs=r=new Map);let s=r.get(t);s?o(s)?s.push(e):(s=[s,e],r.set(t,s)):r.set(t,e);const i=K(e);if(!i&&this===n)return;let a=(i?e:n)[G].relatedRefs;a||((i?e:n)[G].relatedRefs=a=[]),a.push({origin:this,ref:t,node:i?null:e})}__getRef(t){return 1!==this[G].state&&c(`Warning: call __getRef before component '${this.constructor.name}' rendered will get nothing. see https://[TODO]`),this[G].refs?.get(t)}__beforeRender(){}__afterRender(){}__beforeDestroy(){}}X[G]=!0;const Y=jQuery;var Z=t.n(Y);const tt=echarts;var et=t.n(tt);async function nt(t){const e=t;return[(()=>{const e=v("h2","jQuery & echarts integration");return t[G].rootNodes.push(e),e})(),(()=>{const n=v("p",(()=>{const n=O("div",{class:"chart-container"});return e.__setRef("chart",n,t),n})());return t[G].rootNodes.push(n),n})(),(()=>{const n=v("p",(()=>{const n=v("button","Render Chart");return e.__setRef("btn",n,t),n})());return t[G].rootNodes.push(n),n})()]}!async function(t,e,n){const r=t.create(void 0);await r.__renderToDOM(e,e!==document.body)}(class extends X{static get template(){return nt}constructor(t){super(t);const e=this[N].proxy;e._btnHandler=e.onButtonClick.bind(e),e._chart=null}__afterRender(){Z()(this.__getRef("btn")).on("click",this._btnHandler)}__beforeDestroy(){Z()(this.__getRef("btn")).off("click",this._btnHandler),this._chart&&this._chart.dispose()}onButtonClick(t){console.log(t),this._chart||(this._chart=et().init(this.__getRef("chart"))),this._chart.setOption({title:{text:"ECharts entry example"},tooltip:{},legend:{data:["Sales"]},xAxis:{data:["shirt","cardign","chiffon shirt","pants","heels","socks"]},yAxis:{},series:[{name:"Sales",type:"bar",data:new Array(6).fill(0).map((()=>10*Math.random()|4))}]})}},document.getElementById("root-app"))})();
//# sourceMappingURL=bundle.min.js.map